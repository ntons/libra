bind: ':80'
env: 'dev'
services:
  portal:
    redis:
    - 'redis://redis:6379/1'
    mongo: 'mongodb://mongo:27017'
  database:
    database: &database
      redis:
      - 'redis://redis:6379/2'
      mongo: 'mongodb://mongo:27017'
    mailbox: &mailbox
      redis:
      - 'redis://redis:6379/3'
      mongo: 'mongodb://mongo:27017'
    distlock:
      redis:
      - 'redis://redis:6379/4'
      ttl: '10s'
  syncer:
    tasks:
    - name: db
      <<: *database
    - name: mb
      <<: *mailbox
  ranking:
    bubblechart:
      redis:
      - 'redis://redis:6379/5'
    leaderboard:
      redis:
      - 'redis://redis:6379/6'
  gateway:
    broadcast:
      redis:
      - 'redis://redis:6379/7'

