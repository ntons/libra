# librad configuration
# enable/disable service(s) by command line options

bind: {{ ':80'|env:'LIBRAD_BIND' }}
dev:  {{ 'off'|env:'LIBRAD_DEV' }}

services:
  registry:
    redis: {{ 'unspecified'|env:'LIBRAD_REGISTRY_REDIS' }}
    mongo: {{ 'unspecified'|env:'LIBRAD_REGISTRY_MONGO' }}

  database:
    database: &database
      redis:
      - {{ 'unspecified'|env:'LIBRAD_DATABASE_REDIS' }}
      mongo: {{ 'unspecified'|env:'LIBRAD_DATABASE_MONGO' }}
    mailbox: &mailbox
      redis:
      - {{ 'unspecified'|env:'LIBRAD_MAILBOX_REDIS' }}
      mongo: {{ 'unspecified'|env:'LIBRAD_MAILBOX_MONGO' }}
    distlock:
      redis:
      - {{ 'unspecified'|env:'LIBRAD_DISTLOCK_REDIS' }}
      ttl: {{ '10s'|env:'LIBRAD_DISTLOCK_TTL' }}

  syncer:
    tasks:
    - name: db
      <<: *database
    - name: mb
      <<: *mailbox

  ranking:
    bubblechart:
      redis: {{ 'unspecified'|env:'LIBRAD_BUBBLECHART_REDIS' }}
    leaderboard:
      redis: {{ 'unspecified'|env:'LIBRAD_LEADERBOARD_REDIS' }}

  gateway:
    broadcast:
      redis: {{ 'unspecified'|env:'LIBRAD_GATEWAY_BROADCAST_REDIS' }}

